@using NewsPortal.Logic.Enums
@using X.PagedList.Mvc.Core
@using X.PagedList.Mvc.Core.Common
@model X.PagedList.IPagedList<NewsPortal.Logic.Models.Post>

@{
    Layout = "_LayoutWithoutNavbar";
}

<div>
    <div class="btn-group btn-group-sm" style="margin-left: 60%" role="group">
        @Html.ActionLink("By Date", "SortPosts", "Post", new
        {
            sort = SortBy.Date,
            pageName = @ViewData["Title"],
            page = 1
        }, new { @class = "btn btn-outline-dark" })
        @Html.ActionLink("By Rating", "SortPosts", "Post", new
        {
            sort = SortBy.Rating,
            pageName = @ViewData["Title"],
            page = 1
        }, new { @class = "btn btn-outline-dark" })
        @if (ViewData["isDescending"].Equals(false))
        {
            @Html.ActionLink("Ascending", "SortPosts", "Post", new
            {
                sort = ViewData["sortBy"],
                isDescending = true,
                pageName = @ViewData["Title"],
                page = 1
            }, new { @class = "btn btn-outline-dark" })
        }
        else
        {
            @Html.ActionLink("Descending", "SortPosts", "Post", new
            {
                sort = ViewData["sortBy"],
                isDescending = false,
                pageName = @ViewData["Title"],
                page = 1
            }, new { @class = "btn btn-outline-dark" })
        }

    </div>
    @foreach (var post in Model)
    {
        <div class="form-horizontal">
            <hr />
            <div class="form-group">
                <h4>@Html.ActionLink(post.Name, "GetPostById", "Post", new { id = post.Id })</h4>
            </div>
            <div class="form-group">
                @post.Description
            </div>
        </div>
    }

    @Html.PagedListPager(Model, page => Url.Action("SortPosts", "Post", new
    {
        page,
        sort = ViewData["sortBy"],
        isDescending = ViewData["isDescending"],
        pageName = ViewData["Title"]
    }),
        new PagedListRenderOptions
        {
            LiElementClasses = new string[] { "page-item" },
            PageClasses = new string[] { "page-link" }
        })
</div>
